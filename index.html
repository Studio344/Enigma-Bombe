<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>エニグマ暗号機 &amp; ボンベマシン</title>
    <!-- Bootstrap CSS (CDN) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-light">
<div class="container py-4">
    <!-- Navigation tabs -->
    <ul class="nav nav-tabs mb-3">
        <li class="nav-item">
            <a class="nav-link active" href="#" onclick="showEnigma(event)">エニグマ暗号機</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#" onclick="showBombe(event)">ボンベマシン</a>
        </li>
    </ul>

    <!-- Enigma Machine Section -->
    <div id="enigmaSection">
        <h2 class="h4 mb-3">エニグマ暗号機 シミュレーター</h2>
        <!-- Rotor settings -->
        <div class="mb-3">
            <label class="form-label fw-bold">ローター設定</label>
            <div class="row gx-2 gy-2">
                <div class="col-12 col-md-4">
                    <div class="input-group">
                        <span class="input-group-text">左ローター</span>
                        <select id="rotorL" class="form-select">
                            <option value="I" selected>I</option>
                            <option value="II">II</option>
                            <option value="III">III</option>
                            <option value="IV">IV</option>
                            <option value="V">V</option>
                        </select>
                        <select id="posL" class="form-select">
                            <option value="A" selected>A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                            <option value="I">I</option>
                            <option value="J">J</option>
                            <option value="K">K</option>
                            <option value="L">L</option>
                            <option value="M">M</option>
                            <option value="N">N</option>
                            <option value="O">O</option>
                            <option value="P">P</option>
                            <option value="Q">Q</option>
                            <option value="R">R</option>
                            <option value="S">S</option>
                            <option value="T">T</option>
                            <option value="U">U</option>
                            <option value="V">V</option>
                            <option value="W">W</option>
                            <option value="X">X</option>
                            <option value="Y">Y</option>
                            <option value="Z">Z</option>
                        </select>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="input-group">
                        <span class="input-group-text">中ローター</span>
                        <select id="rotorM" class="form-select">
                            <option value="I">I</option>
                            <option value="II" selected>II</option>
                            <option value="III">III</option>
                            <option value="IV">IV</option>
                            <option value="V">V</option>
                        </select>
                        <select id="posM" class="form-select">
                            <option value="A" selected>A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                            <option value="I">I</option>
                            <option value="J">J</option>
                            <option value="K">K</option>
                            <option value="L">L</option>
                            <option value="M">M</option>
                            <option value="N">N</option>
                            <option value="O">O</option>
                            <option value="P">P</option>
                            <option value="Q">Q</option>
                            <option value="R">R</option>
                            <option value="S">S</option>
                            <option value="T">T</option>
                            <option value="U">U</option>
                            <option value="V">V</option>
                            <option value="W">W</option>
                            <option value="X">X</option>
                            <option value="Y">Y</option>
                            <option value="Z">Z</option>
                        </select>
                    </div>
                </div>
                <div class="col-12 col-md-4">
                    <div class="input-group">
                        <span class="input-group-text">右ローター</span>
                        <select id="rotorR" class="form-select">
                            <option value="I">I</option>
                            <option value="II">II</option>
                            <option value="III" selected>III</option>
                            <option value="IV">IV</option>
                            <option value="V">V</option>
                        </select>
                        <select id="posR" class="form-select">
                            <option value="A" selected>A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                            <option value="I">I</option>
                            <option value="J">J</option>
                            <option value="K">K</option>
                            <option value="L">L</option>
                            <option value="M">M</option>
                            <option value="N">N</option>
                            <option value="O">O</option>
                            <option value="P">P</option>
                            <option value="Q">Q</option>
                            <option value="R">R</option>
                            <option value="S">S</option>
                            <option value="T">T</option>
                            <option value="U">U</option>
                            <option value="V">V</option>
                            <option value="W">W</option>
                            <option value="X">X</option>
                            <option value="Y">Y</option>
                            <option value="Z">Z</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <!-- Plugboard settings -->
        <div class="mb-3">
            <label class="form-label fw-bold">プラグボード</label>
            <div id="plugboardContainer" class="position-relative d-flex flex-wrap justify-content-center align-items-center mb-2">
                <!-- Letters will be inserted here -->
                <svg id="plugboardLines" class="position-absolute top-0 start-0"></svg>
            </div>
            <div class="form-text">文字をクリックして組んでください。（接続済みの文字をクリックすると接続解除）</div>
        </div>
        <!-- Text input/output -->
        <div class="mb-3">
            <label for="inputText" class="form-label fw-bold">暗号化/復号するテキストを入力:</label>
            <textarea id="inputText" class="form-control" rows="3" placeholder="例: HELLO WORLD"></textarea>
        </div>
        <div class="mb-3">
            <button id="encButton" class="btn btn-primary">暗号化/復号</button>
        </div>
        <div class="mb-3">
            <label for="outputText" class="form-label fw-bold">出力</label>
            <div class="position-relative">
                <textarea id="outputText" class="form-control output-textarea" rows="3" readonly></textarea>
                <button id="copyButton" class="btn btn-outline-secondary btn-sm position-absolute" style="top: 5px; right: 5px;">コピー</button>
            </div>
        </div>
    </div>

    <!-- Bombe Machine Section -->
    <div id="bombeSection" style="display: none;">
        <h2 class="h4 mb-3">ボンベマシン 解読ツール</h2>
        <div class="mb-3">
            <label for="cribText" class="form-label">Crib (既知の平文)</label>
            <input type="text" id="cribText" class="form-control" placeholder="例: WETTERVORHERSAGE" />
        </div>
        <div class="mb-3">
            <label for="cribCipher" class="form-label">対応する暗号文</label>
            <input type="text" id="cribCipher" class="form-control" placeholder="例: SNMKGGSTZZ (WETTERVORHERSAGEに対応)" />
        </div>
        <div class="mb-3">
            <label for="cipherText" class="form-label">暗号文全文</label>
            <textarea id="cipherText" class="form-control" rows="3" placeholder="例: SNMKG GSTZZ UGARL VYQGM YWMLU"></textarea>
        </div>
        <div class="mb-3">
            <button id="bombeButton" class="btn btn-primary">解読開始</button>
        </div>
        <div id="bombeResults"></div>
    </div>
</div>
<script src="script.js"></script>
</body>
</html>
